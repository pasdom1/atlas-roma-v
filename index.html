<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Mappa Interattiva</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
  html, body { margin: 0; height: 100%; }
  #map { width: 100%; height: 100%; background: black; }
</style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>

  const imgWidth = 3509;
  const imgHeight = 2482;
  const bounds = [[0, 0], [imgHeight, imgWidth]];

  const map = L.map('map', {
    crs: L.CRS.Simple,
    minZoom: -3,
    maxZoom: 4,
    zoomControl: true,
    attributionControl: false,
    scrollWheelZoom: true,
    touchZoom: true,
    dragging: true,
    doubleClickZoom: true,
    tap: false
  });

  // Immagine come mappa
  L.imageOverlay('./assets/mappa.png', bounds).addTo(map);

  // Calcolo zoom iniziale per NON mostrare bordi neri
// Calcolo zoom iniziale
function getInitialZoom() {
  const screenW = window.innerWidth;
  const screenH = window.innerHeight;

  const zoomX = Math.log2(screenW / imgWidth);
  const zoomY = Math.log2(screenH / imgHeight);

  return Math.min(zoomX, zoomY) + 0.8;
}

const initialZoom = getInitialZoom();

// ðŸ“Œ Il punto NON deve essere [0,0] preciso
// Spostiamo un po' piÃ¹ dentro per NON vedere mai i bordi
const offsetY = 100; // distanza verso il basso
const offsetX = 100; // distanza verso destra

map.setView([offsetY, offsetX], initialZoom);


// ðŸš« BLOCCO DEFINITIVO dei bordi
map.setMaxBounds(bounds);
map.options.maxBoundsViscosity = 1.0;

// Quando cerca di uscire dai limiti â†’ riportalo subito dentro
map.on('moveend', () => {
  map.panInsideBounds(bounds, { animate: false });
});


</script>


</body>
</html>
